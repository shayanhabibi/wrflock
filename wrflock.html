<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>wrflock</title>
<link rel="stylesheet" type="text/css" href="nimdoc.out.css">

<script type="text/javascript" src="dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  if (toggleSwitch !== null) {
    toggleSwitch.addEventListener('change', switchTheme, false);
  }

  var currentTheme = localStorage.getItem('theme');
  if (!currentTheme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    currentTheme = 'dark';
  }
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark' && toggleSwitch !== null) {
      toggleSwitch.checked = true;
    }
  }
}

window.addEventListener('DOMContentLoaded', main);
</script>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">wrflock</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
    <li>
      <a href="theindex.html">Index</a>
    </li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#WaitType"
    title="WaitType = enum
  WriteBlock = 1, WriteYield = 2, ReadBlock = 4, ReadYield = 8, FreeBlock = 16,
  FreeYield = 32">WaitType</a></li>
  <li><a class="reference" href="#WRFLock"
    title="WRFLock = ptr WRFLockObj">WRFLock</a></li>
  <li><a class="reference" href="#WRFLockOp"
    title="WRFLockOp = enum
  Write, Read, Free">WRFLockOp</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">acquire
      <li><a class="reference" href="#acquire%2CWRFLock%2CstaticWRFLockOp"
    title="acquire(lock: WRFLock; op: static WRFLockOp): bool">acquire(lock: WRFLock; op: static WRFLockOp): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">fAcquire
      <li><a class="reference" href="#fAcquire%2CWRFLock"
    title="fAcquire(lock: WRFLock): bool">fAcquire(lock: WRFLock): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">freeWRFLock
      <li><a class="reference" href="#freeWRFLock%2CWRFLock"
    title="freeWRFLock(lock: WRFLock)">freeWRFLock(lock: WRFLock)</a></li>

  </ul>
  <ul class="simple nested-toc-section">fRelease
      <li><a class="reference" href="#fRelease%2CWRFLock"
    title="fRelease(lock: WRFLock): bool">fRelease(lock: WRFLock): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">fTryWait
      <li><a class="reference" href="#fTryWait%2CWRFLock"
    title="fTryWait(lock: WRFLock): bool">fTryWait(lock: WRFLock): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">fWait
      <li><a class="reference" href="#fWait%2CWRFLock%2Cint"
    title="fWait(lock: WRFLock; time: int = 0): bool">fWait(lock: WRFLock; time: int = 0): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">getCurrState
      <li><a class="reference" href="#getCurrState%2CWRFLock"
    title="getCurrState(lock: WRFLock): WRFLockOp">getCurrState(lock: WRFLock): WRFLockOp</a></li>

  </ul>
  <ul class="simple nested-toc-section">initWRFLock
      <li><a class="reference" href="#initWRFLock%2Cset%5BWaitType%5D%2Cbool"
    title="initWRFLock(waitType: set[WaitType] = {}; pshared: bool = false): WRFLock">initWRFLock(waitType: set[WaitType] = {}; pshared: bool = false): WRFLock</a></li>

  </ul>
  <ul class="simple nested-toc-section">rAcquire
      <li><a class="reference" href="#rAcquire%2CWRFLock"
    title="rAcquire(lock: WRFLock): bool">rAcquire(lock: WRFLock): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">release
      <li><a class="reference" href="#release%2CWRFLock%2CstaticWRFLockOp"
    title="release(lock: WRFLock; op: static WRFLockOp): bool">release(lock: WRFLock; op: static WRFLockOp): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">rRelease
      <li><a class="reference" href="#rRelease%2CWRFLock"
    title="rRelease(lock: WRFLock): bool">rRelease(lock: WRFLock): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">rTryWait
      <li><a class="reference" href="#rTryWait%2CWRFLock"
    title="rTryWait(lock: WRFLock): bool">rTryWait(lock: WRFLock): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">rWait
      <li><a class="reference" href="#rWait%2CWRFLock%2Cint"
    title="rWait(lock: WRFLock; time: int = 0): bool">rWait(lock: WRFLock; time: int = 0): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">setFlags
      <li><a class="reference" href="#setFlags%2CWRFLock%2Cset%5BWaitType%5D"
    title="setFlags(lock: WRFLock; flags: set[WaitType])">setFlags(lock: WRFLock; flags: set[WaitType])</a></li>

  </ul>
  <ul class="simple nested-toc-section">tryWait
      <li><a class="reference" href="#tryWait%2CWRFLock%2CstaticWRFLockOp"
    title="tryWait(lock: WRFLock; op: static WRFLockOp): bool">tryWait(lock: WRFLock; op: static WRFLockOp): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">wAcquire
      <li><a class="reference" href="#wAcquire%2CWRFLock"
    title="wAcquire(lock: WRFLock): bool">wAcquire(lock: WRFLock): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">wait
      <li><a class="reference" href="#wait%2CWRFLock%2CstaticWRFLockOp%2Cint"
    title="wait(lock: WRFLock; op: static WRFLockOp; time: int = 0): bool">wait(lock: WRFLock; op: static WRFLockOp; time: int = 0): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">wRelease
      <li><a class="reference" href="#wRelease%2CWRFLock"
    title="wRelease(lock: WRFLock): bool">wRelease(lock: WRFLock): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">wTryWait
      <li><a class="reference" href="#wTryWait%2CWRFLock"
    title="wTryWait(lock: WRFLock): bool">wTryWait(lock: WRFLock): bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">wWait
      <li><a class="reference" href="#wWait%2CWRFLock%2Cint"
    title="wWait(lock: WRFLock; time: int = 0): bool">wWait(lock: WRFLock; time: int = 0): bool</a></li>

  </ul>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#18" id="68">Templates</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">whileTryingLock
      <li><a class="reference" href="#whileTryingLock.t%2CWRFLock%2CstaticWRFLockOp%2Cuntyped%2Cuntyped"
    title="whileTryingLock(lock: WRFLock; op: static WRFLockOp; body: untyped;
                succ: untyped): untyped">whileTryingLock(lock: WRFLock; op: static WRFLockOp; body: untyped;
                succ: untyped): untyped</a></li>

  </ul>
  <ul class="simple nested-toc-section">withLock
      <li><a class="reference" href="#withLock.t%2CWRFLock%2CstaticWRFLockOp%2Cuntyped"
    title="withLock(lock: WRFLock; op: static WRFLockOp; body: untyped): untyped">withLock(lock: WRFLock; op: static WRFLockOp; body: untyped): untyped</a></li>

  </ul>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#19" id="69">Exports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>

</ul>

  </div>
  &nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L1"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L1" class="link-seesrc" target="_blank" >Edit</a>

  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"><p>Copyright (c) 2021 Shayan Habibi Copyright (c) 2019 Mariusz Orlikowski - algorithm</p>
<p>Pure nim implementation of a specialised lock  which enforces linear operations of write, reading and freeing/deallocating while allowing multiple readers, and a single writer and deallocator; known as the WRFLock.</p>
<p>Principally, the WRFLock acts as a state machine. Its advantages is the use of futexes or schedule yielding and a incredibly small memory footprint (8 bytes).</p>
<p>It's primary implementation purpose is for the Single Producer Multiple Producer ring buffer queue proposed by the algorithm author Mariusz Orlikowski. It's use is quite flexible  however and can be used in a variety of designs.</p>
<p>While the schedule yielding waits should be platform independent, the blocking waits are only implemented on operating systems that have been tested for functional implementations of futexes. Linux futex, darwin (macosx) ulocks and windows WaitOnAddress kernel primitives are used.</p>
</p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="wrflock/futexes.html">wrflock/futexes</a>, <a class="reference external" href="wrflock/spec.html">wrflock/spec</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<div id="WaitType">
<dt><pre><a href="wrflock.html#WaitType"><span class="Identifier">WaitType</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">WriteBlock</span> <span class="Other">=</span> <span class="DecNumber">1</span><span class="Other">,</span> <span class="Identifier">WriteYield</span> <span class="Other">=</span> <span class="DecNumber">2</span><span class="Other">,</span> <span class="Identifier">ReadBlock</span> <span class="Other">=</span> <span class="DecNumber">4</span><span class="Other">,</span> <span class="Identifier">ReadYield</span> <span class="Other">=</span> <span class="DecNumber">8</span><span class="Other">,</span> <span class="Identifier">FreeBlock</span> <span class="Other">=</span> <span class="DecNumber">16</span><span class="Other">,</span>
  <span class="Identifier">FreeYield</span> <span class="Other">=</span> <span class="DecNumber">32</span></pre></dt>
<dd>

Flags for setting the wait behaviour of WRFLock
&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L36"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L36" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="WRFLock">
<dt><pre><a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a> <span class="Other">=</span> <span class="Keyword">ptr</span> <span class="Identifier">WRFLockObj</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L33"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L33" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="WRFLockOp">
<dt><pre><a href="wrflock.html#WRFLockOp"><span class="Identifier">WRFLockOp</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">Write</span><span class="Other">,</span> <span class="Identifier">Read</span><span class="Other">,</span> <span class="Identifier">Free</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L44"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L44" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">

<div id="acquire-procs-all">
<div id="acquire,WRFLock,staticWRFLockOp">
<dt><pre><span class="Keyword">proc</span> <a href="#acquire%2CWRFLock%2CstaticWRFLockOp"><span class="Identifier">acquire</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">;</span> <span class="Identifier">op</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">WRFLockOp</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">discardable</span>.}</pre></dt>
<dd>

<p>Acquires the specified access in <tt class="docutils literal"><span class="pre"><span class="Identifier">op</span></span></tt> from the WRFLock.</p>
<p><tt class="docutils literal"><span class="pre"><span class="Identifier">acquire</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">,</span> <span class="Identifier">Read</span><span class="Punctuation">)</span></span></tt> is therefore the same as <tt class="docutils literal"><span class="pre"><span class="Identifier">rAcquire</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">)</span></span></tt></p>
<p><tt class="docutils literal"><span class="pre"><span class="Identifier">acquire</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">,</span> <span class="Identifier">Write</span><span class="Punctuation">)</span></span></tt> is therefore the same as <tt class="docutils literal"><span class="pre"><span class="Identifier">wAcquire</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">)</span></span></tt></p>
<p><tt class="docutils literal"><span class="pre"><span class="Identifier">acquire</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">,</span> <span class="Identifier">Free</span><span class="Punctuation">)</span></span></tt> is therefore the same as <tt class="docutils literal"><span class="pre"><span class="Identifier">fAcquire</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">)</span></span></tt></p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L186"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L186" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="fAcquire-procs-all">
<div id="fAcquire,WRFLock">
<dt><pre><span class="Keyword">proc</span> <a href="#fAcquire%2CWRFLock"><span class="Identifier">fAcquire</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">discardable</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Acquires free access to the WRFLock. Will return false if there is already a free/deallocater.</p>
<p>This is a non blocking operation and must be coupled with a successful fWait/fTimeWait/fTryWait followed by a fRelease.</p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L178"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L178" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="freeWRFLock-procs-all">
<div id="freeWRFLock,WRFLock">
<dt><pre><span class="Keyword">proc</span> <a href="#freeWRFLock%2CWRFLock"><span class="Identifier">freeWRFLock</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Deallocates a WRFLock.
&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L82"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L82" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="fRelease-procs-all">
<div id="fRelease,WRFLock">
<dt><pre><span class="Keyword">proc</span> <a href="#fRelease%2CWRFLock"><span class="Identifier">fRelease</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">discardable</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Releases free access to the WRFLock. Will return false if there isn't a registered free/deallocater access.</p>
<p>This is a non blocking operation and must be coupled with a prior fAcquire.</p>
<p>Success of this operation will allow writers to proceed by returning wWait operations successfuly.</p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L319"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L319" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="fTryWait-procs-all">
<div id="fTryWait,WRFLock">
<dt><pre><span class="Keyword">proc</span> <a href="#fTryWait%2CWRFLock"><span class="Identifier">fTryWait</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Non blocking check to see if the thread can perform its free/cleaning actions.
&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L431"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L431" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="fWait-procs-all">
<div id="fWait,WRFLock,int">
<dt><pre><span class="Keyword">proc</span> <a href="#fWait%2CWRFLock%2Cint"><span class="Identifier">fWait</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">;</span> <span class="Identifier">time</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Waits for <tt class="docutils literal"><span class="pre"><span class="Identifier">time</span></span></tt> in msecs (0 = infinite) for permission to execute its free operations. Returns false if it times out or otherwise errors (depending on OS).</p>
<p>NOTE: At most the true time waited may be up to double the passed time when blocking. This is not the same when schedule yielding.</p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L399"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L399" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="getCurrState-procs-all">
<div id="getCurrState,WRFLock">
<dt><pre><span class="Keyword">proc</span> <a href="#getCurrState%2CWRFLock"><span class="Identifier">getCurrState</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">)</span><span class="Other">:</span> <a href="wrflock.html#WRFLockOp"><span class="Identifier">WRFLockOp</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>For debugging purposes; checks what state the lock is currently in.</p>
<p>raises ValueError if no valid state is found.</p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L475"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L475" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="initWRFLock-procs-all">
<div id="initWRFLock,set[WaitType],bool">
<dt><pre><span class="Keyword">proc</span> <a href="#initWRFLock%2Cset%5BWaitType%5D%2Cbool"><span class="Identifier">initWRFLock</span></a><span class="Other">(</span><span class="Identifier">waitType</span><span class="Other">:</span> <span class="Identifier">set</span><span class="Other">[</span><a href="wrflock.html#WaitType"><span class="Identifier">WaitType</span></a><span class="Other">]</span> <span class="Other">=</span> <span class="Other">{</span><span class="Other">}</span><span class="Other">;</span> <span class="Identifier">pshared</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other">=</span> <span class="Identifier">false</span><span class="Other">)</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Initialise a WRFLock. pShared arg is nonfunctional at the moment.</p>
<p>Default operation for write, read and free waits are blocking. Pass WriteYield, ReadYield and/or FreeYield to waitType to change the operations to schedule yielding respectively.</p>
<p>Note: Yield flags take precedence over Block flags when there are conflicting flags in the waitType set</p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L59"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L59" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="rAcquire-procs-all">
<div id="rAcquire,WRFLock">
<dt><pre><span class="Keyword">proc</span> <a href="#rAcquire%2CWRFLock"><span class="Identifier">rAcquire</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">discardable</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Acquires read access to the WRFLock. Will return false if there are too many readers already holding access (65535 readers).</p>
<p>This is a non blocking operation and must be coupled with a successful rWait/rTimeWait/rTryWait followed by a rRelease.</p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L171"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L171" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="release-procs-all">
<div id="release,WRFLock,staticWRFLockOp">
<dt><pre><span class="Keyword">proc</span> <a href="#release%2CWRFLock%2CstaticWRFLockOp"><span class="Identifier">release</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">;</span> <span class="Identifier">op</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">WRFLockOp</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">discardable</span>.}</pre></dt>
<dd>

<p>Releases the specified access in <tt class="docutils literal"><span class="pre"><span class="Identifier">op</span></span></tt> from the WRFLock.</p>
<p><tt class="docutils literal"><span class="pre"><span class="Identifier">release</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">,</span> <span class="Identifier">Read</span><span class="Punctuation">)</span></span></tt> is therefore the same as <tt class="docutils literal"><span class="pre"><span class="Identifier">rRelease</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">)</span></span></tt></p>
<p><tt class="docutils literal"><span class="pre"><span class="Identifier">release</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">,</span> <span class="Identifier">Write</span><span class="Punctuation">)</span></span></tt> is therefore the same as <tt class="docutils literal"><span class="pre"><span class="Identifier">wRelease</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">)</span></span></tt></p>
<p><tt class="docutils literal"><span class="pre"><span class="Identifier">release</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">,</span> <span class="Identifier">Free</span><span class="Punctuation">)</span></span></tt> is therefore the same as <tt class="docutils literal"><span class="pre"><span class="Identifier">fRelease</span><span class="Punctuation">(</span><span class="Identifier">lock</span><span class="Punctuation">)</span></span></tt></p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L329"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L329" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="rRelease-procs-all">
<div id="rRelease,WRFLock">
<dt><pre><span class="Keyword">proc</span> <a href="#rRelease%2CWRFLock"><span class="Identifier">rRelease</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">discardable</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Releases read access to the WRFLock. Will return false if there isn't a registered read access.</p>
<p>This is a non blocking operation and must be coupled with a prior rAcquire to prevent overflow errors.</p>
<p>Success of this operation reduces the reader counter by 1. When all readers release their access, the thread with 'free' access will be allowed to continue via returning fWait operations successfully.</p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L308"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L308" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="rTryWait-procs-all">
<div id="rTryWait,WRFLock">
<dt><pre><span class="Keyword">proc</span> <a href="#rTryWait%2CWRFLock"><span class="Identifier">rTryWait</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Non blocking check to see if the thread can perform its read actions.
&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L428"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L428" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="rWait-procs-all">
<div id="rWait,WRFLock,int">
<dt><pre><span class="Keyword">proc</span> <a href="#rWait%2CWRFLock%2Cint"><span class="Identifier">rWait</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">;</span> <span class="Identifier">time</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Waits for <tt class="docutils literal"><span class="pre"><span class="Identifier">time</span></span></tt> in msecs (0 = infinite) for permission to execute its read operations. Returns false if it times out or otherwise errors (depending on OS).</p>
<p>NOTE: At most the true time waited may be up to double the passed time when blocking. This is not the same when schedule yielding.</p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L392"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L392" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="setFlags-procs-all">
<div id="setFlags,WRFLock,set[WaitType]">
<dt><pre><span class="Keyword">proc</span> <a href="#setFlags%2CWRFLock%2Cset%5BWaitType%5D"><span class="Identifier">setFlags</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">;</span> <span class="Identifier">flags</span><span class="Other">:</span> <span class="Identifier">set</span><span class="Other">[</span><a href="wrflock.html#WaitType"><span class="Identifier">WaitType</span></a><span class="Other">]</span><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

EXPERIMENTAL - non blocking change of flags on a lock. Any change from a blocking wait to a schedule yield will result in all waiters being awoken. Operations that are blocking will return to sleep after checking their condition while the schedule yield operations will yield after checking their condition.
&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L438"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L438" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="tryWait-procs-all">
<div id="tryWait,WRFLock,staticWRFLockOp">
<dt><pre><span class="Keyword">proc</span> <a href="#tryWait%2CWRFLock%2CstaticWRFLockOp"><span class="Identifier">tryWait</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">;</span> <span class="Identifier">op</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">WRFLockOp</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L435"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L435" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="wAcquire-procs-all">
<div id="wAcquire,WRFLock">
<dt><pre><span class="Keyword">proc</span> <a href="#wAcquire%2CWRFLock"><span class="Identifier">wAcquire</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">discardable</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Acquires write access to the WRFLock. Will return false if there is already a writer holding write access.</p>
<p>This is a non blocking operation and must be coupled with a successful wWait/wTimeWait/wTryWait followed by a wRelease.</p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L164"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L164" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="wait-procs-all">
<div id="wait,WRFLock,staticWRFLockOp,int">
<dt><pre><span class="Keyword">proc</span> <a href="#wait%2CWRFLock%2CstaticWRFLockOp%2Cint"><span class="Identifier">wait</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">;</span> <span class="Identifier">op</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">WRFLockOp</span><span class="Other">;</span> <span class="Identifier">time</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L407"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L407" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="wRelease-procs-all">
<div id="wRelease,WRFLock">
<dt><pre><span class="Keyword">proc</span> <a href="#wRelease%2CWRFLock"><span class="Identifier">wRelease</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span class="Identifier">discardable</span><span class="Other">,</span> <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Releases write access to the WRFLock. Will return false if there isn't a registered write access.</p>
<p>This is a non blocking operation and must be coupled with a prior wAcquire.</p>
<p>Success of this operation will allow readers to proceed by returning rWait operations successfuly.</p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L299"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L299" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="wTryWait-procs-all">
<div id="wTryWait,WRFLock">
<dt><pre><span class="Keyword">proc</span> <a href="#wTryWait%2CWRFLock"><span class="Identifier">wTryWait</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Non blocking check to see if the thread can perform its write actions.
&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L425"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L425" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="wWait-procs-all">
<div id="wWait,WRFLock,int">
<dt><pre><span class="Keyword">proc</span> <a href="#wWait%2CWRFLock%2Cint"><span class="Identifier">wWait</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">;</span> <span class="Identifier">time</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">TimeEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Waits for <tt class="docutils literal"><span class="pre"><span class="Identifier">time</span></span></tt> in msecs (0 = infinite) for permission to execute its write operations. Returns false if it times out or otherwise errors (depending on OS).</p>
<p>NOTE: At most the true time waited may be up to double the passed time when blocking. This is not the same when schedule yielding.</p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L385"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L385" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

</dl></div>
<div class="section" id="18">
<h1><a class="toc-backref" href="#18">Templates</a></h1>
<dl class="item">

<div id="whileTryingLock-templates-all">
<div id="whileTryingLock.t,WRFLock,staticWRFLockOp,untyped,untyped">
<dt><pre><span class="Keyword">template</span> <a href="#whileTryingLock.t%2CWRFLock%2CstaticWRFLockOp%2Cuntyped%2Cuntyped"><span class="Identifier">whileTryingLock</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">;</span> <span class="Identifier">op</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">WRFLockOp</span><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">;</span>
                         <span class="Identifier">succ</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

<p>Convenience template; raises OverFlow error if there is already too many accesses of the given op to the lock.</p>
<p>Acquires access, and then continuously evaluates <tt class="docutils literal"><span class="pre"><span class="Identifier">body</span></span></tt> until the lock allows the given op, at which time it performs <tt class="docutils literal"><span class="pre"><span class="Identifier">succ</span></span></tt> before releasing access.</p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L501"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L501" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

<div id="withLock-templates-all">
<div id="withLock.t,WRFLock,staticWRFLockOp,untyped">
<dt><pre><span class="Keyword">template</span> <a href="#withLock.t%2CWRFLock%2CstaticWRFLockOp%2Cuntyped"><span class="Identifier">withLock</span></a><span class="Other">(</span><span class="Identifier">lock</span><span class="Other">:</span> <a href="wrflock.html#WRFLock"><span class="Identifier">WRFLock</span></a><span class="Other">;</span> <span class="Identifier">op</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">WRFLockOp</span><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

<p>Convenience template; raises OverFlow error if there is already too many accesses of the given op to the lock.</p>
<p>Blocks until the lock allows the given op to proceed</p>

&nbsp;&nbsp;<a
href="https://github.com/shayanhabibi/wrflock/tree/08fa7be4089369d235dc0dc4c4b2bf8867f63f62/wrflock.nim#L489"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/shayanhabibi/wrflock/edit/master/wrflock.nim#L489" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</div>

</dl></div>
<div class="section" id="19">
<h1><a class="toc-backref" href="#19">Exports</a></h1>
<dl class="item">
<a href="wrflock/spec.html#wWaitBlock"><span class="Identifier">wWaitBlock</span></a>, <a href="wrflock/spec.html#wWaitYield"><span class="Identifier">wWaitYield</span></a>, <a href="wrflock/spec.html#rWaitBlock"><span class="Identifier">rWaitBlock</span></a>, <a href="wrflock/spec.html#rWaitYield"><span class="Identifier">rWaitYield</span></a>, <a href="wrflock/spec.html#fWaitBlock"><span class="Identifier">fWaitBlock</span></a>, <a href="wrflock/spec.html#fWaitYield"><span class="Identifier">fWaitYield</span></a>
</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2021-12-22 07:08:14 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
